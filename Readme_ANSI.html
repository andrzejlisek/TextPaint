<html>

<head>
<meta http-equiv="Content-Type"
content="text/html; charset=windows-1250">
<meta name="GENERATOR" content="Microsoft FrontPage Express 2.0">
<title>Untitled </title>
</head>

<body>

<h1>ANSI in TextPaint</h1>

<p>TextPaint can handle ANSI escape codes, which allows to get
colored text using colors from palette of standard 16 items,
which was used in DOS operating system and ANSI-compatible text
terminals. In 1990s the ANSI files was popular format of colorful
ASCII-art, which was called as ANSI-art.</p>

<p>Some ANSI files contains simple animation achieved by
manipulating cursor position and character writing out of the
line-by-line order. Such files was animated where was displayed
slowly. Most BBS and similar services provides about 2400 bits
per second.</p>

<p>TextPaint can handle ANSI files and provides other work modes,
which also uses the same ANSI interpreter.</p>

<h2>Displaying animations</h2>

<p>The <strong>WorkMode=2</strong> is usable for displaying
simple animations by progressive and slowly processing data from
file. You can also start the server on choosen port, which serves
the same contents of file. This feature can be used for comparing
displaying file with other Telnet client.</p>

<h2>Telnet client</h2>

<p>TextPaint can act as Telnet or SSH client in <strong>WorkMode=3</strong>.
it is usable for test various cases with existing Telnet
services. It is recommended to run Telnet server and TextPaint on
the same machine, because data is sent as plain text and the
Telnet protocol is obsolete. Because TextPaint is not intented to
be replacement of other terminal emulators, the TextPaint does
not support and will not support other protocols such as SSH. The
true telnet data can be achievet using network sniffer. Because
some network sniffers does not work on localhost connection, you
can use virtual machine or other computer in the same network to
test data exchange with reading real transfered data.</p>

<h1>Additional settings</h1>

<p>The <strong>Config.txt</strong> contains parameters, which are
related with ANSI interpreter or network features. Like other
parameters, every parameter in <strong>Config.txt</strong> can be
overrided with parameter in command line.</p>

<p>The parameters, which is not described below, are described in
<strong>Readme.md</strong> file.</p>

<h2>ANSI-related settings</h2>

<p>The following parameters are especially related to creating or
interpreting ANSI data and affects in <strong>WorkMode=0</strong>,
<strong>WorkMode=1</strong> and <strong>WorkMode=2</strong>:</p>

<ul>
    <li><strong>ANSIRead</strong> - Use ANSI interpreter instead
        of plain text file on file reading in <strong>WorkMode=0</strong>,
        this parameter affects both reading file in application
        running or pressing <strong>F8</strong> key:<ul>
            <li><strong>0</strong> - Read file as plain text file
                without ANSI interpreter.</li>
            <li><strong>1</strong> - Read file as ANSI file using
                ANSI interpreter. In file contains animation,
                there will be read final display.</li>
        </ul>
    </li>
    <li><strong>ANSIReadCR</strong> - Reaction by the CR
        character while reading ANSI file in <strong>WorkMode=0</strong>
        or <strong>WorkMode=1</strong>. This parameter can fix
        incorrectly written text or ANSI files:<ul>
            <li><strong>0</strong> - Process as CR character only
                (recommended).</li>
            <li><strong>1</strong> - Process as CRLF character
                sequence (recommended with <strong>ANSIReadLF=2</strong>).</li>
            <li><strong>2</strong> - Ommic CR character.</li>
        </ul>
    </li>
    <li><strong>ANSIReadLF</strong> - Reaction by the LF
        character while reading ANSI file in <strong>WorkMode=0</strong>
        or <strong>WorkMode=1</strong>. This parameter can fix
        incorrectly written text or ANSI files:<ul>
            <li><strong>0</strong> - Process as LF character only
                (recommended).</li>
            <li><strong>1</strong> - Process as CRLF character
                sequence (recommended with <strong>ANSIReadCR=2</strong>).</li>
            <li><strong>2</strong> - Ommic LF character.</li>
        </ul>
    </li>
    <li><strong>ANSIWidth</strong> - Width of ANSI virtual screen
        (not to be confused with <strong>WinW</strong> parameter)
        for <strong>WorkMode=0</strong> and <strong>WorkMode=4</strong>.
        If not set, the default is <strong>80</strong>.</li>
    <li><strong>ANSIHeight</strong> - Height of ANSI virtual
        screen (not to be confused with <strong>WinH</strong>
        parameter) for <strong>WorkMode=0</strong> and <strong>WorkMode=4</strong>.
        If not set, the default is <strong>24</strong> (when <strong>ANSIDOS=0</strong>)
        or <strong>25</strong> (when <strong>ANSIDOS=1</strong>).</li>
    <li><strong>ANSIBufferAbove</strong> - Use extending buffer
        above the screen, affects in <strong>WorkMode=0</strong>
        and <strong>WorkMode=4</strong>.</li>
    <li><strong>ANSIBufferBelow</strong> - Use extending buffer
        below the screen, affects in <strong>WorkMode=0</strong>
        and <strong>WorkMode=4</strong>.</li>
    <li><strong>ANSIDOS</strong> - Use DOS behavior instead of
        standard VTxxx/ANSI-derivative behavior, there are some
        differences, which affects correctness of ANSI display
        depending on source.</li>
    <li><strong>ANSIIgnoreBlink</strong> - Ignore blink attribute
        while interpreting ANSI data. Some ANSI files was created
        assuming that terminal displays blinking text as steady
        text on bright background. Some other ANSI files was
        created assuming terminal displays text as blinking and
        this attribute should be ignored while TextPaint does not
        support other attributes than colors of background and
        text.</li>
    <li><strong>ANSIIgnoreBold</strong> - Ignore bold attribute
        while interpreting ANSI data.</li>
    <li><strong>ANSIIgnoreConcealed</strong> - Ignore concealed
        (hidden, invisible) attribute while interpreting ANSI
        data.</li>
    <li><strong>ANSIReverseMode</strong> - Mode for reverse
        color:<ul>
            <li><strong>0</strong> - Before bold and blink -
                compatible with DOS, usable in most cases.</li>
            <li><strong>1</strong> - After bold and blink - with <strong>ANSIIgnoreBlink=1</strong>
                is more close to original VTxxx terminal.</li>
        </ul>
    </li>
    <li><strong>ANSIPrintBackspace</strong> - Print backspace
        character (while <strong>ANSIDOS=1</strong>) or ignore
        backspace character (while <strong>ANSIDOS=0</strong>)
        instead of moving cursor backward.</li>
    <li><strong>ANSIWrite</strong> - Save colors as ANSI escape
        codes using key <strong>F7</strong> in <strong>WorkMode=0</strong>:<ul>
            <li><strong>0</strong> - Write file as plain text,
                ommiting colors.</li>
            <li><strong>1</strong> - Write file as ANSI text
                including color definition.</li>
        </ul>
    </li>
    <li><strong>ANSIWriteBold</strong> - Use bold attribute
        instead of color attribute for save high intensity
        foreground color, work only while <strong>ANSIWrite=1</strong>.</li>
    <li><strong>ANSIWriteBlink</strong> - Use blink attribute
        instead of color attribute for save high intensity
        background color, work only while <strong>ANSIWrite=1</strong>.</li>
    <li><strong>ANSICharsDOS</strong> - List of 32 replacement
        character codes, to use as printable of characters from <strong>00h</strong>
        to <strong>31h</strong> while <strong>DOSMODE=1</strong>.</li>
    <li><strong>ANSICharsVT100</strong> - List of 32 replacement
        character codes, to use as VT100 graphics characters from
        <strong>5Fh</strong> to <strong>7Eh</strong>.</li>
    <li><strong>ANSICharsVT52</strong> - List of 32 replacement
        character codes, to use as VT52 graphics characters from <strong>5Fh</strong>
        to <strong>7Eh</strong>.</li>
    <li><strong>ANSIScrollSmooth</strong> - Display smooth scroll
        when smooth scroll state is set. This parameter may have
        following values:<ul>
            <li><strong>0</strong> - Do not use smooth scroll.</li>
            <li><strong>1</strong> - No text movement, delay
                only.</li>
            <li><strong>2</strong> - Move text by half of
                height..</li>
            <li><strong>3</strong> - Move text by quarter of
                height.</li>
            <li><strong>4</strong> - Move text by eighth of
                height.</li>
        </ul>
    </li>
    <li><strong>ANSIScrollChars</strong> - Number of characters,
        which smooth scroll durates. Use 0 to turn off smooth
        scroll.</li>
    <li><strong>ANSIScrollBuffer</strong> - Buffer length in
        characters, for buffering arriving characters while
        scrolling. Use this settings to achieve more smooth
        scrolling. Set <strong>0</strong> for disable this
        buffer.</li>
</ul>

<h2>File and server settings</h2>

<p>The parameters affects only in <strong>WorkMode=1</strong>,
which purpose is displaying animation on serving file contents
via network:</p>

<ul>
    <li><strong>FileDelayStep</strong> - Number of steps
        processed within single cycle.</li>
    <li><strong>FileDelayOffset</strong> - Number of steps
        processed within the first cycle.</li>
    <li><strong>FileDelayTime</strong> - Time in milliseconds
        between displaying two portions of steps.</li>
    <li><strong>ServerPort</strong> - Number od network port, on
        which the serwer will wait for connection. In order to
        not use connection, set <strong>ServerPort=0</strong>.</li>
    <li><strong>ServerEncoding</strong> - Character encoding used
        to send data via network if <strong>ServerPort&gt;0</strong>.</li>
</ul>

<h2>Terminal settings</h2>

<p>The parameters affects only in <strong>WorkMode=2</strong>
while connecting or working as Telnet client:</p>

<ul>
    <li><strong>TerminalEncoding</strong> - Character encoding
        used to aquire characters from Telnet service.</li>
    <li><strong>TerminalConnection</strong> - Type of connection
        (case insensitive):<ul>
            <li><strong>Loopback</strong> - Loopback without
                connection. The provided address will be ignored.
                This connection can be used for terminal test.</li>
            <li><strong>Telnet</strong> - Telnet protocol.</li>
            <li><strong>SSH</strong> - SSH protocol with
                authentication using login and password.</li>
            <li><strong>ApplicationX</strong> - Application with
                standard stream redirection (experimental), the X
                indicates flags. Input the application file name
                with parameters in place of address. The
                application must use standard I/O streams to
                work. There are following possible variants:<ul>
                    <li>Application0 - Without byte replacing.</li>
                    <li>Application1 - Every <strong>0D</strong>
                        byte will be replaced with <strong>0A</strong>
                        byte. The affects the <strong>Enter</strong>
                        key working.</li>
                    <li>Application2 - Every <strong>7F</strong>
                        byte will be replaced with <strong>08</strong>
                        byte. The affects the <strong>Backspace</strong>
                        key working.</li>
                    <li>Application3 - Both <strong>Enter</strong>
                        and <strong>Backspace</strong> replace.</li>
                </ul>
            </li>
        </ul>
    </li>
    <li><strong>TerminalName</strong> - Terminal name sent to
        server, when server asks for client terminal name. In
        some cases service can require certain terminal name or
        service behavior can vary depending on provided terminal
        name.</li>
    <li><strong>TerminalType</strong> - Terminal type simulated
        in reports depending on terminal type. This setting does
        not matter the terminal emulation and ANSI processing,
        but may affect working with some servers, which requests
        information about terminal type. There are following
        possible values:<ul>
            <li><strong>0</strong> - VT100.</li>
            <li><strong>1</strong> - VT102 (default).</li>
            <li><strong>2</strong> - VT220.</li>
            <li><strong>3</strong> - VT320.</li>
            <li><strong>4</strong> - VT420.</li>
            <li><strong>5</strong> - VT520.</li>
        </ul>
    </li>
    <li><strong>TerminalFile</strong> - If not blank, there is
        the file, to which the terminal display will be dumped
        with time markers. This file can be played directly using
        <strong>WorkMode=1</strong> or rendered using <strong>WorkMode=4</strong>.</li>
    <li><strong>TerminalTimeResolution</strong> - The number of
        milliseconds between two display cycles. Decreasing this
        value induces the more fluenty terminal display, but
        causes more CPU usage during working.</li>
    <li><strong>TerminalStep</strong> - The maximum number of
        processing steps within single display cycle. The <strong>0</strong>
        value means unlimited number. This parameter can be used
        to simulate low receiving transfer speed or for smooth
        scroll simulation.</li>
    <li><strong>TerminalKeys</strong> - The code of terminal
        keyboard codes configuration, consists of 4 digits.
        Described on <strong>Terminal Client</strong> chapter.</li>
</ul>

<h1>DOS vs. standard terminal</h1>

<p>Older ANSI files uses features of DOS terminal, which works
slightly differently than standard VTx/ANSI terminal. The
differences cannot be accomodate with each other, because the
same data sequence (text with escape codes) giver different
result. In the table below, there are all differences:</p>

<table border="1" width="100%">
    <tr>
        <td width="33%">Feature</td>
        <td width="33%">ANSIDOS=0</td>
        <td width="34%">ANSIDOS=1</td>
    </tr>
    <tr>
        <td>Text wrapping.</td>
        <td>After writing character at the last column, cursor
        remains at the same line. The cursor jumps into beginning
        of next line only after writing one more character and
        this character will be written at the first column.</td>
        <td>After writing character at the last column, cursor
        immediately jumps into beginning of next line.</td>
    </tr>
    <tr>
        <td>Characters from <strong>00h</strong> to <strong>1Fh</strong>,
        excluding from <strong>07h</strong> to <strong>0Dh</strong>,
        <strong>1Ah</strong>, <strong>1Bh</strong>.</td>
        <td>Character will be ignored.</td>
        <td>Character will be written using assigned printable
        character according standard DOS character glyph for
        control characters.</td>
    </tr>
    <tr>
        <td>Character <strong>07h</strong> - bell</td>
        <td>Emit the &quot;bell&quot; sound.</td>
        <td>Write character <strong>2022h</strong>.</td>
    </tr>
    <tr>
        <td>Character <strong>08h</strong> - backspace</td>
        <td>Move cursor left one column.</td>
        <td>Write character <strong>25D8h</strong>.</td>
    </tr>
    <tr>
        <td>Character <strong>09h</strong> - horizontal tab</td>
        <td>Move cursor right to the nearest multiply of 6
        column.</td>
        <td>Write character <strong>25CBh</strong>.</td>
    </tr>
    <tr>
        <td>Character <strong>0Bh</strong> - vertical tab</td>
        <td>Move cursor down one line.</td>
        <td>Write character <strong>2642h</strong>.</td>
    </tr>
    <tr>
        <td>Character <strong>0Ch</strong> - form feed</td>
        <td>Same as <strong>0Ah</strong>.</td>
        <td>Write character <strong>2640h</strong>.</td>
    </tr>
    <tr>
        <td>Character <strong>7Fh</strong></td>
        <td>Ignore.</td>
        <td>Write character <strong>7Fh</strong>.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh D</strong></td>
        <td>Move cursor one line up, scroll if necessary.</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh M</strong></td>
        <td>Move cursor one line down, scroll if necessary.</td>
        <td>Enter into music state.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh [ x L</strong></td>
        <td>Scroll <strong>x</strong> lines up.</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh [ x M</strong></td>
        <td>Scroll <strong>x</strong> lines down.</td>
        <td>Enter into music state.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh [ x C</strong></td>
        <td>Move cursor right, if <strong>x</strong> exceedes
        distance to the last column, leave cursor at the last
        column.</td>
        <td>Move cursor right, if <strong>x</strong> exceedes
        distance to the last column, jump to begining of next
        line and move remaining value from begining of next line.</td>
    </tr>
    <tr>
        <td>Sequence <strong>1Bh [ 2 J</strong></td>
        <td>Clear screen only.</td>
        <td>Clear screen and move cursor to upper left corner.</td>
    </tr>
</table>

<h2>Music state</h2>

<p>Some ANSI files uses ANSI music, which generates simple sounds
through PC speaker. Sequence <strong>1Bh M</strong> or <strong>1Bh
[ x M</strong> informs the application, that following printable
characters will define sound sequence and are not to write on the
screen. The last character of such sequence is <strong>0Eh</strong>
and demands the application to exit from the music state. If <strong>03h</strong>
or <strong>0Eh</strong> occurs without entering into music state,
the character will be printed or ignored according the <strong>ANSIDOS</strong>
parameter.</p>

<p>When <strong>ANSIDOS=0</strong>, the music state is not
available. Generating the sound is not implemented, because there
is very rarely used and is not necessary to view or edit ANSI
file.</p>

<h2>DOS control character assignment</h2>

<p>Characters from 00h to 1Fh are control characters and should
be treated as non-printable characters. DOS has ability to print
control character in some cases and it was used in some ANSI
files.</p>

<table border="1" width="100%">
    <tr>
        <td>Byte value</td>
        <td>Character name</td>
        <td>Default printable character</td>
    </tr>
    <tr>
        <td>00h</td>
        <td>NUL</td>
        <td>0020h</td>
    </tr>
    <tr>
        <td>01h</td>
        <td>SOH</td>
        <td>263Ah</td>
    </tr>
    <tr>
        <td>02h</td>
        <td>STX</td>
        <td>263Bh</td>
    </tr>
    <tr>
        <td>03h</td>
        <td>ETX</td>
        <td>2665h</td>
    </tr>
    <tr>
        <td>04h</td>
        <td>EOT</td>
        <td>2666h</td>
    </tr>
    <tr>
        <td>05h</td>
        <td>ENQ</td>
        <td>2663h</td>
    </tr>
    <tr>
        <td>06h</td>
        <td>ACK</td>
        <td>2660h</td>
    </tr>
    <tr>
        <td>07h</td>
        <td>BEL</td>
        <td>2022h</td>
    </tr>
    <tr>
        <td>08h</td>
        <td>BS</td>
        <td>25D8h</td>
    </tr>
    <tr>
        <td>09h</td>
        <td>HT</td>
        <td>25CBh</td>
    </tr>
    <tr>
        <td>0Ah</td>
        <td>LF</td>
        <td>25D9h</td>
    </tr>
    <tr>
        <td>0Bh</td>
        <td>VT</td>
        <td>2642h</td>
    </tr>
    <tr>
        <td>0Ch</td>
        <td>FF</td>
        <td>2640h</td>
    </tr>
    <tr>
        <td>0Dh</td>
        <td>CR</td>
        <td>266Ah</td>
    </tr>
    <tr>
        <td>0Eh</td>
        <td>SO</td>
        <td>266Bh</td>
    </tr>
    <tr>
        <td>0Fh</td>
        <td>SI</td>
        <td>263Ch</td>
    </tr>
    <tr>
        <td>10h</td>
        <td>DLE</td>
        <td>25BAh</td>
    </tr>
    <tr>
        <td>11h</td>
        <td>DC1</td>
        <td>25C4h</td>
    </tr>
    <tr>
        <td>12h</td>
        <td>DC2</td>
        <td>2195h</td>
    </tr>
    <tr>
        <td>13h</td>
        <td>DC3</td>
        <td>203Ch</td>
    </tr>
    <tr>
        <td>14h</td>
        <td>DC4</td>
        <td>00B6h</td>
    </tr>
    <tr>
        <td>15h</td>
        <td>NAK</td>
        <td>00A7h</td>
    </tr>
    <tr>
        <td>16h</td>
        <td>SYN</td>
        <td>25ACh</td>
    </tr>
    <tr>
        <td>17h</td>
        <td>ETB</td>
        <td>21A8h</td>
    </tr>
    <tr>
        <td>18h</td>
        <td>CAN</td>
        <td>2191h</td>
    </tr>
    <tr>
        <td>19h</td>
        <td>EM</td>
        <td>2193h</td>
    </tr>
    <tr>
        <td>1Ah</td>
        <td>SUB</td>
        <td>2192h</td>
    </tr>
    <tr>
        <td>1Bh</td>
        <td>ESC</td>
        <td>2190h</td>
    </tr>
    <tr>
        <td>1Ch</td>
        <td>FS</td>
        <td>221Fh</td>
    </tr>
    <tr>
        <td>1Dh</td>
        <td>GS</td>
        <td>2194h</td>
    </tr>
    <tr>
        <td>1Eh</td>
        <td>RS</td>
        <td>25B2h</td>
    </tr>
    <tr>
        <td>1Fh</td>
        <td>US</td>
        <td>25BCh</td>
    </tr>
</table>

<p>The characters from <strong>00h</strong> to <strong>1Fh</strong>
from the ANSI file can be printed in exception of <strong>0Ah</strong>,
<strong>0Dh</strong>, <strong>1Ah</strong> and <strong>1Bh</strong>.</p>

<p>The printable character assignment can be changed by <strong>ANSICharsDOS</strong>
setting.</p>

<h1>File display and server</h1>

<p>The work mode 1 allows to display any file using sequentially
displaying character to view simple ANSI animations or graphics
like while downoading in real time. After running this <strong>TextPaint</strong>
with <strong>WorkMode=1</strong> parameter, you will see
information about functions available during displaying. At this
state, you can change current file by writing full path of
another file. The file name with path will be written also, if
you drop file icon into window.</p>

<p>To start displaying file, press <strong>Enter</strong>, in
order to quit <strong>TextPaint</strong>, press <strong>Tab</strong>.</p>

<p>After pressing <strong>Enter</strong>, if parameter <strong>ServerPort</strong>
has value other than <strong>0</strong>, applcation will wait for
connection from network client. As network client you can use
other terminal emulator. If <strong>ServerPort</strong> is set to
<strong>0</strong>, the step will be skipped.</p>

<p>After this, screen will be cleared. You can use the following
keys:</p>

<ul>
    <li><strong>Esc</strong> - Return to information screen.</li>
    <li><strong>Tab</strong> - Show or hide status bar</li>
    <li><strong>Enter</strong> - Start or stop automatic display
        according the <strong>FileDelayChars</strong> and <strong>FileDelayTime</strong>
        parameters.</li>
    <li><strong>Space</strong> - Process 1 character (not to be
        confused with 1 byte, especially when handling UTF-8 or
        UTF-16 file).</li>
    <li><strong>Backspace</strong> - Process as many characters
        as set as <strong>FileDelayChars</strong> parameter.</li>
</ul>

<p>In order to quit application, ples the <strong>Esc</strong>
key to return to information and press <strong>Tab</strong> key
to quit.</p>

<h2>Status bar</h2>

<p>During display, you can show or hide the status bar by
pressing <strong>Tab</strong> key, which contains following
informations:</p>

<ul>
    <li>Number of processed characters from file.</li>
    <li>Number of all characters of file.</li>
    <li>List of last processed characters filling whole screen
        line, character number above 128 does not equal to byte
        values and depends on <strong>FileReadEncoding</strong>
        parameter.</li>
</ul>

<p>If you press the <strong>`</strong> or <strong>~</strong> key,
there will be displayed the information in 4 states:</p>

<ul>
    <li>Display characters above 1Bh as characters and below 1Bh
        as numbers. The space 20h are displayed as <strong>replacement
        character</strong>, which looks as negative question mark
        to increase readibility.</li>
    <li>Display characters from 1Bh to 0x7E as characters and
        other characters as numbers. The space 20h are displayed
        as <strong>replacement character</strong>, which looks as
        negative question mark to increase readibility.</li>
    <li>Display all characters as numbers.</li>
    <li>Number of current step and minimum/maximum number of
        dummy steps added by <strong>1Bh [ 1; P1 V</strong> (time
        marker) sequence. The negative number means, that the
        time presented by time marker represents ealier number of
        steps. In such case, the display can be slightly
        glitched. You have to increase the <strong>FileDelayStep</strong>
        parameter to solve this problem.</li>
</ul>

<p>Every press <strong>Tab</strong> key forces screen to repaint,
so if screens displays glitches, press the <strong>Tab</strong>
or <strong>`</strong> or <strong>~</strong> key to repaint.</p>

<p><img src="2_01.gif" alt="`Readme/2_01.png" width="640"
height="384"></p>

<p>Status bar at the top, covers the first line.</p>

<p><img src="2_02.gif" alt="`Readme/2_02.png" width="640"
height="384"></p>

<p>Status bar at the bottom, covers the last line.</p>

<p><img src="2_03.gif" alt="`Readme/2_03.png" width="640"
height="384"></p>

<h1>Telnet and SSH client</h1>

<p>TextPaint provides simple Telnet and SSH client, whis can be
used to test ANSI interpreter compatibility with VTxxx/ANSI
terminal. Telnet client is available in <strong>WorkMode=2</strong>
and you have to provide addres in place of file name in command
line. For example, you can provide <strong>localhost:23</strong>
if you have working local telnet server.</p>

<p>In most cases, this is recommended to set <strong>ANSIWidth</strong>
to <strong>80</strong> and <strong>ANSIHeight</strong> to <strong>24</strong>.
If you not specify, the default width and height will be used.</p>

<p>After running <strong>TextPaint</strong>, choose and press
key, which will be used as escape key. The escape key means the
key, which provides access to functions instead of sending
keystroke to server.</p>

<p><img src="2_04.gif" alt="`Readme/2_04.png" width="640"
height="384"></p>

<p>The escape key can be changed during the session. After
pressing the key, the session will begin and you can use the
server service.</p>

<p><img src="2_05.gif" alt="`Readme/2_05.png" width="640"
height="384"></p>

<p>During the session, if you press the selected escape key, the
information window will popup and you will can use special keys:</p>

<ul>
    <li><strong>Esc</strong> - Return to terminal (close
        information).</li>
    <li><strong>Enter</strong> - Change escape key.</li>
    <li><strong>Tab</strong> - Move information window.</li>
    <li><strong>Backspace</strong> - Quit from application.</li>
    <li><strong>Number 1 to 9</strong> - Send <strong>F1</strong>
        to <strong>F9</strong> keys, useful, when application has
        problem with capturing function key.</li>
    <li><strong>Number 0</strong> - Send <strong>F10</strong>
        key.</li>
    <li><strong>Space</strong> - Send other conrol codes instead
        of function keys by pressing numbers. If enabled, the
        numbers sends as following:<ul>
            <li><strong>Number 1</strong> - NUL (00h).</li>
            <li><strong>Number 2</strong> - ESC (1Bh).</li>
            <li><strong>Number 3</strong> - PS (1Ch).</li>
            <li><strong>Number 4</strong> - GS (1Dh).</li>
            <li><strong>Number 5</strong> - RS (1Eh).</li>
            <li><strong>Number 6</strong> - US (1Fh).</li>
        </ul>
    </li>
    <li><strong>[</strong> - Send <strong>F11</strong> key.</li>
    <li><strong>]</strong> - Send <strong>F12</strong> key.</li>
    <li><strong>Letter</strong> - Send letter with Ctrl modifier,
        like Ctrl+X.</li>
    <li>/ - Connect od disconnect, depending on current state.</li>
    <li><strong>\</strong> - Send screen size to server, some
        servers requires such information.</li>
    <li><strong>+</strong> or <strong>=</strong> or <strong>-</strong>
        or <strong>*</strong> - Change codes for function keys,
        arrows, and position keys.</li>
    <li><strong>`</strong> or <strong>~</strong> - Enable or
        disablo local echo. While enabled, all printable
        characters, <strong>Enter</strong> and <strong>Backspace</strong>
        key will be send both to server and to terminal.</li>
</ul>

<p><img src="2_06.gif" alt="`Readme/2_06.png" width="640"
height="384"></p>

<h2>Telnet client limitations</h2>

<p><strong>TextPaint</strong> has some limitations compared to
other Telnet/SSH software due to architecture and appled
approaches:</p>

<ul>
    <li>Screen size change on server demand (like switch between
        80 and 132 columns) is not possible.</li>
    <li>If server demand some information via escape sequence,
        the client responds for some requests only (this feature
        is necessary very rarely).</li>
    <li>Limited compatibility with VTxxx/ANSI terminals, the
        compatibility is sufficient in most cases.</li>
    <li>SSH relys on the Renci SSH.NET library. This library does
        not support terminal resize and sending screen size
        causes shell restart.</li>
    <li>TextPaint recognizes XTERM 256 colors, but these colors
        are converted to standard 16 colors.</li>
    <li>The bold, blink and underline will not be show explicity
        and will be displayed as following by default:<ul>
            <li><strong>Bold</strong> - brighter foreground
                color, usable with some ANSI files.</li>
            <li><strong>Blink</strong> - brighter background
                color, usable with some ANSI files.</li>
            <li><strong>Underline</strong> - not displayed.</li>
        </ul>
    </li>
</ul>

<h2>Key codes</h2>

<p>The telnet client has several control code sets for some
special keys to achieve compatibility with most services. The
initial setting is defined by <strong>TerminalKeys</strong>
setting. this parameter consists of 4 digits:</p>

<ol>
    <li>Arrows - <strong>0</strong> or <strong>1</strong></li>
    <li>Functions from <strong>F1</strong> to <strong>F4</strong>
        - <strong>0</strong> or <strong>1</strong></li>
    <li>Functions from <strong>F5</strong> to <strong>F12</strong>
        - <strong>0</strong> or <strong>1</strong></li>
    <li>Navigation keys - <strong>0</strong> or <strong>1</strong>
        or <strong>2</strong></li>
</ol>

<p>There is keys and codes, which will sent to server for each
possible setting:</p>

<table border="1" width="100%">
    <tr>
        <td width="20%">Key</td>
        <td width="20%">Number of digits</td>
        <td width="20%">Value = 0</td>
        <td width="20%">Value = 1</td>
        <td width="20%">Value = 2</td>
    </tr>
    <tr>
        <td>Up Arrow</td>
        <td>1</td>
        <td>1Bh [ A</td>
        <td>1Bh O A</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>Down Arrow</td>
        <td>1</td>
        <td>1Bh [ B</td>
        <td>1Bh O B</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>Right Arrow</td>
        <td>1</td>
        <td>1Bh [ C</td>
        <td>1Bh O C</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>Left Arrow</td>
        <td>1</td>
        <td>1Bh [ D</td>
        <td>1Bh O D</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F1</td>
        <td>2</td>
        <td>1Bh [ 1 1 ~</td>
        <td>1Bh O P</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F2</td>
        <td>2</td>
        <td>1Bh [ 1 2 ~</td>
        <td>1Bh O Q</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F3</td>
        <td>2</td>
        <td>1Bh [ 1 3 ~</td>
        <td>1Bh O R</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F4</td>
        <td>2</td>
        <td>1Bh [ 1 4 ~</td>
        <td>1Bh O S</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F5</td>
        <td>3</td>
        <td>1Bh [ 1 5 ~</td>
        <td>1Bh O T</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F6</td>
        <td>3</td>
        <td>1Bh [ 1 7 ~</td>
        <td>1Bh O U</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F7</td>
        <td>3</td>
        <td>1Bh [ 1 8 ~</td>
        <td>1Bh O V</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F8</td>
        <td>3</td>
        <td>1Bh [ 1 9 ~</td>
        <td>1Bh O W</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F9</td>
        <td>3</td>
        <td>1Bh [ 2 0 ~</td>
        <td>1Bh O X</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F10</td>
        <td>3</td>
        <td>1Bh [ 2 1 ~</td>
        <td>1Bh O Y</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F11</td>
        <td>3</td>
        <td>1Bh [ 2 3 ~</td>
        <td>1Bh O Z</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>F12</td>
        <td>3</td>
        <td>1Bh [ 2 4 ~</td>
        <td>1Bh O [</td>
        <td>N/A</td>
    </tr>
    <tr>
        <td>Insert</td>
        <td>4</td>
        <td>1Bh [ 2 ~</td>
        <td>1Bh [ 2 ~</td>
        <td>1Bh [ 2 ~</td>
    </tr>
    <tr>
        <td>Delete</td>
        <td>4</td>
        <td>1Bh [ 3 ~</td>
        <td>1Bh [ 3 ~</td>
        <td>1Bh [ 3 ~</td>
    </tr>
    <tr>
        <td>Home</td>
        <td>4</td>
        <td>1Bh [ 1 ~</td>
        <td>1Bh O H</td>
        <td>1Bh [ H</td>
    </tr>
    <tr>
        <td>End</td>
        <td>4</td>
        <td>1Bh [ 4 ~</td>
        <td>1Bh O F</td>
        <td>1Bh [ F</td>
    </tr>
    <tr>
        <td>Page Up</td>
        <td>4</td>
        <td>1Bh [ 5 ~</td>
        <td>1Bh [ 5 ~</td>
        <td>1Bh [ 5 ~</td>
    </tr>
    <tr>
        <td>Page Down</td>
        <td>4</td>
        <td>1Bh [ 6 ~</td>
        <td>1Bh [ 6 ~</td>
        <td>1Bh [ 6 ~</td>
    </tr>
</table>

<p>During session, you can change the key assignment. Press the
escape key to show the information window. If you press the <strong>+</strong>
or <strong>=</strong> key, you will mowe the marker across the
digits in cycle. If you press the <strong>-</strong> or <strong>*</strong>
key, you will change the digit across all possible values. Then,
if you close the information window by <strong>Esc</strong> key,
the key assignment will be changed immediately.</p>

<h2>Recording and playing session</h2>

<p>You can run Telnet client with session recording to
Session.ans using 100ms resolution (10 frames per second) with
unlimited data per step:</p>

<pre>TextPaint localhost WorkMode=2 TerminalStep=0 TerminalTimeResolution=100 TerminalFile=Session.ans</pre>

<p>After recording, you can play the file using the same time
step and use high number of process step per frame. The
displaying tempo should be similar to original session:</p>

<pre>TextPaint Session.ans WorkMode=1 FileDelayTime=100 FileDelayStep=10000 FileDelayFrame=10000</pre>

<p>You can render this session to movie (picture sequence), to
achieve original session tempo, you have to play this 10 frames
per second:</p>

<pre>TextPaint Session.ans WorkMode=4 ANSIRead=1 RenderFile=MoviePath RenderStep=10000 RenderFrame=10000</pre>

<h1>Escape sequences</h1>

<p>TextPaint has implemented limited set of escape sequences used
to ANSI data processing and interpreting. The sequences are
following and enough for most files and many telnet services.</p>

<h2>The non-standard sequences</h2>

<p>The sequences consists of constant number of character in
exception by <strong>1Bh ]</strong>, which ends by <strong>07h</strong>.</p>

<table border="1" width="100%">
    <tr>
        <td>Escape sequence</td>
        <td>XTERM name</td>
        <td>Meaning</td>
    </tr>
    <tr>
        <td>1Bh ( P1</td>
        <td>&nbsp;</td>
        <td>Character set for bank 0: If P1 = <strong>0</strong>
        or P1 = <strong>2</strong>, then semigraphical, else use
        standard.</td>
    </tr>
    <tr>
        <td>1Bh ) P1</td>
        <td>&nbsp;</td>
        <td>Character set for bank 1: If P1 = <strong>0</strong>
        or P1 = <strong>2</strong>, then semigraphical, else use
        standard.</td>
    </tr>
    <tr>
        <td>1Bh * P1</td>
        <td>&nbsp;</td>
        <td>Character set for bank 2: If P1 = <strong>0</strong>
        or P1 = <strong>2</strong>, then semigraphical, else use
        standard.</td>
    </tr>
    <tr>
        <td>1Bh + P1</td>
        <td>&nbsp;</td>
        <td>Character set for bank 3: If P1 = <strong>0</strong>
        or P1 = <strong>2</strong>, then semigraphical, else use
        standard.</td>
    </tr>
    <tr>
        <td>1Bh n</td>
        <td>LS2</td>
        <td>Use character bank 2.</td>
    </tr>
    <tr>
        <td>1Bh o</td>
        <td>LS3</td>
        <td>Use character bank 3.</td>
    </tr>
    <tr>
        <td>1Bh c</td>
        <td>RIS</td>
        <td>Reset terminal.</td>
    </tr>
    <tr>
        <td>1Bh # 0</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh # 1</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh # 2</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh # 3</td>
        <td>DECDHL</td>
        <td>Set current line font to double width and double
        height, display upper part.</td>
    </tr>
    <tr>
        <td>1Bh # 4</td>
        <td>DECDHL</td>
        <td>Set current line font to double width and double
        height, display lower part.</td>
    </tr>
    <tr>
        <td>1Bh # 5</td>
        <td>DECSWL</td>
        <td>Set current line font to normal width and normal
        height.</td>
    </tr>
    <tr>
        <td>1Bh # 6</td>
        <td>DECDWL</td>
        <td>Set current line font to double width and normal
        height.</td>
    </tr>
    <tr>
        <td>1Bh # 7</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh # 8</td>
        <td>DECALN</td>
        <td>Fill screen with <strong>E</strong> character.</td>
    </tr>
    <tr>
        <td>1Bh # 9</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh ] ... 07h</td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh 6</td>
        <td>DECBI</td>
        <td>Move line left by deleting first character.</td>
    </tr>
    <tr>
        <td>1Bh 7</td>
        <td>DECSC</td>
        <td>Save current cursor position and text attributes.</td>
    </tr>
    <tr>
        <td>1Bh 8</td>
        <td>DECRC</td>
        <td>Restore saved cursor position and text attributes.</td>
    </tr>
    <tr>
        <td>1Bh 9</td>
        <td>DECFI</td>
        <td>Move line right by inserting space before first
        character.</td>
    </tr>
    <tr>
        <td>1Bh D - <strong>ANSIDOS=0</strong></td>
        <td>IND</td>
        <td>Move cursor down by 1 step, scroll screen if needed.</td>
    </tr>
    <tr>
        <td>1Bh D - <strong>ANSIDOS=1</strong></td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh M - <strong>ANSIDOS=0</strong></td>
        <td>RI</td>
        <td>Move cursor up by 1 step, scroll screen if needed.</td>
    </tr>
    <tr>
        <td>1Bh M - <strong>ANSIDOS=1</strong></td>
        <td>&nbsp;</td>
        <td>Enter to music state, ignore following characters.</td>
    </tr>
    <tr>
        <td>1Bh E</td>
        <td>NEL</td>
        <td>Move cursor down by 1 step, scroll screen if needed
        and move cursor to first column.</td>
    </tr>
    <tr>
        <td>1Bh H</td>
        <td>HTS</td>
        <td>Add current column to tabulator list</td>
    </tr>
    <tr>
        <td>1Bh P</td>
        <td>DCS</td>
        <td>Switch into DCS state. Next arriving character will
        be buffered without printing.</td>
    </tr>
    <tr>
        <td>1Bh \</td>
        <td>ST</td>
        <td>If within DCS state: Exit from DCS state and request
        DCS report. Normally, ignore.</td>
    </tr>
    <tr>
        <td>1Bh =</td>
        <td>DECKPAM</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh &gt;</td>
        <td>DECKPNM</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh N</td>
        <td>SS2</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh O</td>
        <td>SS3</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>08h</td>
        <td>BS</td>
        <td>Move cursor one step left.</td>
    </tr>
    <tr>
        <td>09h - <strong>ANSIDOS=0</strong></td>
        <td>TAB</td>
        <td>Move cursor right to nearest multiply of 8 or defined
        tab stop.</td>
    </tr>
    <tr>
        <td>0Ah</td>
        <td>LF</td>
        <td>Move cursor one line down, scroll screen if needed.</td>
    </tr>
    <tr>
        <td>0Bh - <strong>ANSIDOS=0</strong></td>
        <td>VT</td>
        <td>Move cursor one line down, scroll screen if needed.</td>
    </tr>
    <tr>
        <td>0Ch - <strong>ANSIDOS=0</strong></td>
        <td>FF</td>
        <td>Move cursor one line down, scroll screen if needed.</td>
    </tr>
    <tr>
        <td>0Dh</td>
        <td>CR</td>
        <td>Move cursor to first column.</td>
    </tr>
    <tr>
        <td>0Eh - <strong>ANSIDOS=1</strong></td>
        <td>&nbsp;</td>
        <td>Exit from music state if in music state, otherwise,
        write character.</td>
    </tr>
    <tr>
        <td>0Eh - <strong>ANSIDOS=0</strong></td>
        <td>SO</td>
        <td>Use character bank 1.</td>
    </tr>
    <tr>
        <td>0Fh - <strong>ANSIDOS=0</strong></td>
        <td>SI</td>
        <td>Use character bank 0.</td>
    </tr>
    <tr>
        <td>1Ah</td>
        <td>SUB</td>
        <td>Break data processing, ignore in <strong>WorkMode=2</strong>.</td>
    </tr>
</table>

<p>When <strong>ANSIDOS=1</strong>, every character between <strong>01h</strong>
to <strong>1Fh</strong> will be written as standard character in
exception of characters: <strong>08h</strong>, <strong>0Ah</strong>,
<strong>0Dh</strong>, <strong>1Ah</strong> and <strong>1Bh</strong>.</p>

<p>When <strong>ANSIDOS=0</strong>, every character between <strong>01h</strong>
to <strong>1Fh</strong> will be ignored in exception of
characters: <strong>08h</strong>, <strong>09h</strong>, <strong>0Ah</strong>,
<strong>0Bh</strong>, <strong>0Dh</strong>, <strong>1Ah</strong>
and <strong>1Bh</strong>.</p>

<h2>The standard sequences</h2>

<p>Every standard sequence begins with <strong>1Bh</strong>
followed by [ character and ends with any letter or the character
<strong>@</strong> or <strong>`</strong> or <strong>{</strong>:</p>

<p>The standard sequences with <strong>?</strong> charater and
without parameters:</p>

<table border="1" width="100%">
    <tr>
        <td>Escape sequence</td>
        <td>XTERM name</td>
        <td>Meaning</td>
    </tr>
    <tr>
        <td>1Bh [ ? 2 l</td>
        <td>DECRST / DECANM</td>
        <td>Enter into VT52 mode.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 3 h</td>
        <td>DECSET / DECCOLM</td>
        <td>Clear screen and move cursor to top left corner of
        cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 3 l</td>
        <td>DECRST / DECCOLM</td>
        <td>Clear screen and move cursor to top left corner of
        cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 4 h</td>
        <td>DECSET / DECSCLM</td>
        <td>Enable smooth scrolling</td>
    </tr>
    <tr>
        <td>1Bh [ ? 4 l</td>
        <td>DECRST / DECSCLM</td>
        <td>Disable smooth scrolling</td>
    </tr>
    <tr>
        <td>1Bh [ ? 6 h</td>
        <td>DECSET / DECOM</td>
        <td>Enable origin mode and move cursor to top left corner
        of cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 6 l</td>
        <td>DECRST / DECOM</td>
        <td>Disable origin mode and move cursor to top left
        corner of screen.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 7 h</td>
        <td>DECSET / DECAWM</td>
        <td>Disable screen wrapping.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 7 l</td>
        <td>DECRST / DECAWM</td>
        <td>Enable screen wrapping.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 69 h</td>
        <td>DECSET / DECLRMM</td>
        <td>Enable left and right margin.</td>
    </tr>
    <tr>
        <td>1Bh [ ? 69 l</td>
        <td>DECRST / DECLRMM</td>
        <td>Disable left and right margin.</td>
    </tr>
</table>

<p>The standard sequences without <strong>?</strong> character
and may contains parameters. When parameter is ommited, the
default value is <strong>1</strong>:</p>

<table border="1" width="100%">
    <tr>
        <td>Escape sequence</td>
        <td>XTERM name</td>
        <td>Meaning</td>
    </tr>
    <tr>
        <td>1Bh [ ! p</td>
        <td>DECSTR</td>
        <td>Reset terminal state including clearing the screen.</td>
    </tr>
    <tr>
        <td>1Bh [ s</td>
        <td>SCOSC</td>
        <td>Save current cursor position and text attributes.</td>
    </tr>
    <tr>
        <td>1Bh [ u</td>
        <td>SCORC</td>
        <td>Restore saved cursor position and text attributes.</td>
    </tr>
    <tr>
        <td>1Bh [ 4 h</td>
        <td>SM / IRM</td>
        <td>Enable inserting mode.</td>
    </tr>
    <tr>
        <td>1Bh [ 4 l</td>
        <td>RM / IRM</td>
        <td>Disable inserting mode.</td>
    </tr>
    <tr>
        <td>1Bh [ 20 h</td>
        <td>SM / LNM</td>
        <td>Enable new line mode (<strong>WorkMode=2</strong>
        only).</td>
    </tr>
    <tr>
        <td>1Bh [ 20 l</td>
        <td>RM / LNM</td>
        <td>Disable new line mode (<strong>WorkMode=2</strong>
        only).</td>
    </tr>
    <tr>
        <td>1Bh [ 0 J</td>
        <td>ED</td>
        <td>Clear screen from cursor to bottom right corner.</td>
    </tr>
    <tr>
        <td>1Bh [ 1 J</td>
        <td>ED</td>
        <td>Clear screen from top left corner to cursor.</td>
    </tr>
    <tr>
        <td>1Bh [ 2 J</td>
        <td>ED</td>
        <td>Clear screen and move cursor to top left corner of
        screen.</td>
    </tr>
    <tr>
        <td>1Bh [ 0 K</td>
        <td>EL</td>
        <td>Clear current line from cursor to right edge.</td>
    </tr>
    <tr>
        <td>1Bh [ 1 K</td>
        <td>EL</td>
        <td>Clear current line from left edge to cursor.</td>
    </tr>
    <tr>
        <td>1Bh [ 2 K</td>
        <td>EL</td>
        <td>Clear current line from left edge to right edge.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 ; P2 H</td>
        <td>CUP</td>
        <td>Move cursor to column P1 and line P2, move cursor to
        be within cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 ; P2 f</td>
        <td>HVP</td>
        <td>Move cursor to column P1 and line P2, move cursor to
        be within cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 A</td>
        <td>CUU</td>
        <td>Move cursor up through P1 steps.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 B</td>
        <td>CUD</td>
        <td>Move cursor down through P1 steps.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 C</td>
        <td>CUF</td>
        <td>Move cursor right through P1 steps.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 D</td>
        <td>CUB</td>
        <td>Move cursor left through P1 steps.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 d</td>
        <td>VPA</td>
        <td>Move cursor to P1 line.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 e</td>
        <td>VPR</td>
        <td>Move cursor down through P1 lines.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 `</td>
        <td>HPA</td>
        <td>Move cursor to P1 column.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 a</td>
        <td>HPR</td>
        <td>Move cursor right through P1 columns.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 E</td>
        <td>CNL</td>
        <td>Move cursor to the first column and P1 lines down.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 F</td>
        <td>CPL</td>
        <td>Move cursor to the first column and P1 lines up.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 G</td>
        <td>CHA</td>
        <td>Move cursor to P1 column.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 S</td>
        <td>SU</td>
        <td>Scroll cursor area P1 times down.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 T</td>
        <td>SD</td>
        <td>Scroll cursor area P1 times up.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 ; P2 r</td>
        <td>DECSTBM</td>
        <td>Define cursor area as from P1 line to P2 line, move
        cursor to be within cursor area.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 ; P2 s</td>
        <td>DECSLRM</td>
        <td>Define left and right margin.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 L - <strong>ANSIDOS=0</strong></td>
        <td>IL</td>
        <td>Scroll cursor area P1 times up.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 L - <strong>ANSIDOS=1</strong></td>
        <td>&nbsp;</td>
        <td>Ignore.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 M - <strong>ANSIDOS=0</strong></td>
        <td>DL</td>
        <td>Scroll cursor area P1 times down.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 M - <strong>ANSIDOS=1</strong></td>
        <td>&nbsp;</td>
        <td>Enter to music state, ignore following characters.</td>
    </tr>
    <tr>
        <td>1Bh [ ... m</td>
        <td>SGR</td>
        <td>Set attributes, number of parameters can vary.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 @</td>
        <td>ICH</td>
        <td>Insert space and move text being right to be cursor
        P1 times.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 P</td>
        <td>DCH</td>
        <td>Delete character and move text being right to be
        cursor P1 times.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 X</td>
        <td>ECH</td>
        <td>Delete P1 characters right to be cursor without text
        movement.</td>
    </tr>
    <tr>
        <td>1Bh [ 0 g</td>
        <td>TBC</td>
        <td>Remove current column from tabulator list.</td>
    </tr>
    <tr>
        <td>1Bh [ 3 g</td>
        <td>TBC</td>
        <td>Clear tabulator list.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 I</td>
        <td>CHT</td>
        <td>Forward tabulation P1 times.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 Z</td>
        <td>CBT</td>
        <td>Backward tabulation P1 times.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 b</td>
        <td>REP</td>
        <td>Repeat last printed character P1 times.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 Space @</td>
        <td>SL</td>
        <td>Move left P1 columns.</td>
    </tr>
    <tr>
        <td>1Bh [ P1 Space A</td>
        <td>SR</td>
        <td>Move right P1 columns.</td>
    </tr>
</table>

<h2>The request-response sequences</h2>

<p>Some sequences does not changing the terminal working, but
received from server in <strong>WorkMode=2</strong>, induces
response to server:</p>

<table border="1" width="100%">
    <tr>
        <td>Request</td>
        <td>XTERM name</td>
        <td>Response (for VT102)</td>
    </tr>
    <tr>
        <td>1Bh [ 0 c</td>
        <td>Primary DA *</td>
        <td>1Bh [ ? 6 c</td>
    </tr>
    <tr>
        <td>1Bh [ 5 n</td>
        <td>DSR</td>
        <td>1Bh [ 0 n</td>
    </tr>
    <tr>
        <td>1Bh [ 6 n</td>
        <td>DSR / CPR</td>
        <td>1Bh [ YY ; XX R where YY and XX are current cursor
        position</td>
    </tr>
    <tr>
        <td>1Bh [ &gt; 0 c</td>
        <td>Secondary DA *</td>
        <td>1Bh [ &gt; 0 ; 1 0 ; 0 c</td>
    </tr>
    <tr>
        <td>1Bh [ = 0 c</td>
        <td>Tertiary DA</td>
        <td>1Bh P ! | 0 0 0 0 0 0 0 0 1Bh \</td>
    </tr>
    <tr>
        <td>1Bh [ 0 x</td>
        <td>DECREQTPARM</td>
        <td>1Bh [ 2 ; 1 ; 1 ; 1 1 2 ; 1 1 2 ; 1 ; 0 x</td>
    </tr>
    <tr>
        <td>1Bh [ 1 x</td>
        <td>DECREQTPARM</td>
        <td>1Bh [ 3 ; 1 ; 1 ; 1 1 2 ; 1 1 2 ; 1 ; 0 x</td>
    </tr>
    <tr>
        <td>1Bh $q&quot;p1 1Bh \</td>
        <td>DCS / DECSCL *</td>
        <td>1Bh P1$r61;1&quot;p 1Bh \</td>
    </tr>
</table>

<h2>TerminalType-affected request-response sequences</h2>

<p>There are three sequences, which has response depending on <strong>TerminalType</strong>
parameter:</p>

<table border="1" width="100%">
    <tr>
        <td width="25%">TerminalType</td>
        <td width="25%">Primary DA</td>
        <td width="25%">Secondary DA</td>
        <td width="25%">DCS / DECSCL</td>
    </tr>
    <tr>
        <td width="25%">0 - VT100</td>
        <td width="25%">1Bh [ ? 1 ; 2 c</td>
        <td width="25%">1Bh [ &gt; 0 ; 1 0 ; 0 c</td>
        <td width="25%">1Bh P1$r61;1&quot;p 1Bh \</td>
    </tr>
    <tr>
        <td width="25%">1 - VT102</td>
        <td width="25%">1Bh [ ? 6 c</td>
        <td width="25%">1Bh [ &gt; 0 ; 1 0 ; 0 c</td>
        <td width="25%">1Bh P1$r61;1&quot;p 1Bh \</td>
    </tr>
    <tr>
        <td>2 - VT220</td>
        <td>1Bh [ ? 6 2 ; 1 ; 2 ; 6 ; 7 ; 8 ; 9 c</td>
        <td>1Bh [ &gt; 1 ; 1 0 ; 0 c</td>
        <td>1Bh P1$r62;1&quot;p 1Bh \</td>
    </tr>
    <tr>
        <td>3 - VT320</td>
        <td>1Bh [ ? 6 2 ; 1 ; 2 ; 6 ; 7 ; 8 ; 9 c</td>
        <td>1Bh [ &gt; 2 4 ; 1 0 ; 0 c</td>
        <td>1Bh P1$r63;1&quot;p 1Bh \</td>
    </tr>
    <tr>
        <td>4 - VT420</td>
        <td>1Bh [ ? 6 4 ; 1 ; 2 ; 6 ; 7 ; 8 ; 9 ; 1 5 ; 1 8 ; 2 1
        c</td>
        <td>1Bh [ &gt; 4 1 ; 1 0 ; 0 c</td>
        <td>1Bh P1$r64;1&quot;p 1Bh \</td>
    </tr>
    <tr>
        <td>5 - VT520</td>
        <td>1Bh [ ? 6 5 ; 1 ; 2 ; 6 ; 7 ; 8 ; 9 ; 1 5 ; 1 8 ; 2 1
        c</td>
        <td>1Bh [ &gt; 6 4 ; 1 0 ; 0 c</td>
        <td>1Bh P1$r65;1&quot;p 1Bh \</td>
    </tr>
</table>

<h2>The same-meaning escape sequences</h2>

<p>There are other supported escape sequences, which are the same
meaining as standard escape sequences:</p>

<table border="1" width="100%">
    <tr>
        <td>Sequence</td>
        <td>Equivalent</td>
    </tr>
    <tr>
        <td>1Bh [ H</td>
        <td>1Bh [ 1 ; 1 H</td>
    </tr>
    <tr>
        <td>1Bh [ J</td>
        <td>1Bh [ 0 J</td>
    </tr>
    <tr>
        <td>1Bh [ K</td>
        <td>1Bh [ 0 K</td>
    </tr>
    <tr>
        <td>1Bh [ c</td>
        <td>1Bh [ 0 c</td>
    </tr>
    <tr>
        <td>1Bh [ &gt; c</td>
        <td>1Bh [ &gt; 0 c</td>
    </tr>
    <tr>
        <td>1Bh [ = c</td>
        <td>1Bh [ = 0 c</td>
    </tr>
    <tr>
        <td>1Bh [ g</td>
        <td>1Bh [ 0 g</td>
    </tr>
</table>

<h2>The TextPaint escape sequences</h2>

<p>There is escape sequences usable in TextPaint only and should
be ignored in other software terminals:</p>

<table border="1" width="100%">
    <tr>
        <td width="50%">Sequence</td>
        <td width="50%">Meaning</td>
    </tr>
    <tr>
        <td width="50%">1Bh [ 0; P1; P2 V</td>
        <td width="50%">Set font width to P1 and font height to
        P2, the P1 and P2 are not explicity font size, it encodes
        the font size and character part number.</td>
    </tr>
    <tr>
        <td>1Bh [ 1; P1 V</td>
        <td>Wait (process some dummy steps) to be processed P1
        multiplied by defined constant. It can be treated as time
        marker. Used for terminal recording and playing.</td>
    </tr>
</table>

<p>The font size dimension (width or height) defines
simultaneiusly character size (number of modules) and displayed
character part (horizontally and vertically):</p>

<ul>
    <li><strong>0</strong> - size 1, whole character.</li>
    <li><strong>1</strong> - size 2, first part.</li>
    <li><strong>2</strong> - size 2, second part.</li>
    <li><strong>3</strong> - size 3, first part.</li>
    <li><strong>4</strong> - size 3, second part.</li>
    <li><strong>5</strong> - size 3, third part.</li>
    <li><strong>6</strong> - size 4, first part.</li>
    <li><strong>7</strong> - size 4, second part.</li>
    <li><strong>8</strong> - size 4, third part.</li>
    <li><strong>9</strong> - size 4, fourth part.</li>
</ul>

<p>The maximum supported font size is 32, so the maximum possible
number is 527, which means font size 32 and displayed 32th part.
Currently, <strong>TextPaint</strong> can read and write file
with various font sizes, but adjusting font size in editor is not
implemented yet.</p>

<h2>Text attributes </h2>

<p>During processing ANSI data, there will be used internal text
attributes with following default values:</p>

<ul>
    <li>Foreground = -1 (means color not defined)</li>
    <li>Background = -1 (means color not defined)</li>
    <li>Bold = false</li>
    <li>Blink = false</li>
    <li>Inverse = false</li>
</ul>

<p>The attributes can be changed with the <strong>1Bh [ ... m</strong>
escape sequence. The number of parameters can vary and has
following meaning:</p>

<table border="1" width="100%">
    <tr>
        <td width="50%">Parameter</td>
        <td width="50%">Meaning</td>
    </tr>
    <tr>
        <td>0</td>
        <td>Set all parameters to default values</td>
    </tr>
    <tr>
        <td>00</td>
        <td>Set all parameters to default values</td>
    </tr>
    <tr>
        <td>39</td>
        <td>Foreground = -1</td>
    </tr>
    <tr>
        <td>30</td>
        <td>Foreground = 0</td>
    </tr>
    <tr>
        <td>31</td>
        <td>Foreground = 1</td>
    </tr>
    <tr>
        <td>32</td>
        <td>Foreground = 2</td>
    </tr>
    <tr>
        <td>33</td>
        <td>Foreground = 3</td>
    </tr>
    <tr>
        <td>34</td>
        <td>Foreground = 4</td>
    </tr>
    <tr>
        <td>35</td>
        <td>Foreground = 5</td>
    </tr>
    <tr>
        <td>36</td>
        <td>Foreground = 6</td>
    </tr>
    <tr>
        <td>37</td>
        <td>Foreground = 7</td>
    </tr>
    <tr>
        <td>90</td>
        <td>Foreground = 8</td>
    </tr>
    <tr>
        <td>91</td>
        <td>Foreground = 9</td>
    </tr>
    <tr>
        <td>92</td>
        <td>Foreground = A</td>
    </tr>
    <tr>
        <td>93</td>
        <td>Foreground = B</td>
    </tr>
    <tr>
        <td>94</td>
        <td>Foreground = C</td>
    </tr>
    <tr>
        <td>95</td>
        <td>Foreground = D</td>
    </tr>
    <tr>
        <td>96</td>
        <td>Foreground = E</td>
    </tr>
    <tr>
        <td>97</td>
        <td>Foreground = F</td>
    </tr>
    <tr>
        <td>49</td>
        <td>Background = -1</td>
    </tr>
    <tr>
        <td>40</td>
        <td>Background = 0</td>
    </tr>
    <tr>
        <td>41</td>
        <td>Background = 1</td>
    </tr>
    <tr>
        <td>42</td>
        <td>Background = 2</td>
    </tr>
    <tr>
        <td>43</td>
        <td>Background = 3</td>
    </tr>
    <tr>
        <td>44</td>
        <td>Background = 4</td>
    </tr>
    <tr>
        <td>45</td>
        <td>Background = 5</td>
    </tr>
    <tr>
        <td>46</td>
        <td>Background = 6</td>
    </tr>
    <tr>
        <td>47</td>
        <td>Background = 7</td>
    </tr>
    <tr>
        <td>100</td>
        <td>Background = 8</td>
    </tr>
    <tr>
        <td>101</td>
        <td>Background = 9</td>
    </tr>
    <tr>
        <td>102</td>
        <td>Background = A</td>
    </tr>
    <tr>
        <td>103</td>
        <td>Background = B</td>
    </tr>
    <tr>
        <td>104</td>
        <td>Background = C</td>
    </tr>
    <tr>
        <td>105</td>
        <td>Background = D</td>
    </tr>
    <tr>
        <td>106</td>
        <td>Background = E</td>
    </tr>
    <tr>
        <td>107</td>
        <td>Background = F</td>
    </tr>
    <tr>
        <td>1</td>
        <td>Bold = true</td>
    </tr>
    <tr>
        <td>22</td>
        <td>Bold = false</td>
    </tr>
    <tr>
        <td>5</td>
        <td>Blink = true</td>
    </tr>
    <tr>
        <td>25</td>
        <td>Blink = false</td>
    </tr>
    <tr>
        <td>7</td>
        <td>Inverse = true</td>
    </tr>
    <tr>
        <td>27</td>
        <td>Inverse = false</td>
    </tr>
    <tr>
        <td>38 followed with 5</td>
        <td>Set the foreground color to the next number (after <strong>5</strong>)</td>
    </tr>
    <tr>
        <td>48 followed with 5</td>
        <td>Set the background color to the next number (after <strong>5</strong>)</td>
    </tr>
</table>

<p>The parameters <strong>38</strong> or <strong>48</strong>
followed by <strong>5</strong> sets the color from the 256-color
palette. The TextPaint supports standard 16-colors only. The
other colors are mapped as following:</p>

<ul>
    <li><strong>Colors from 0 to 15</strong> - <strong>0</strong>,
        <strong>1</strong>, <strong>2</strong>, <strong>3</strong>,
        <strong>4</strong>, <strong>5</strong>, <strong>6</strong>,
        <strong>7</strong>, <strong>8</strong>, <strong>9</strong>,
        <strong>A</strong>, <strong>B</strong>, <strong>C</strong>,
        <strong>D</strong>, <strong>E</strong>, <strong>F</strong>.</li>
    <li><strong>Colors from 16 to 231</strong> - The color number
        is achieved from RGB color model using formula <font
        face="Liberation Serif"><tt>((B + 6*G + 36*R) + 16)</tt></font>
        and are mapped by following rules:<ul>
            <li>Each component value are interpreted as low (<strong>0</strong>,
                <strong>1</strong>, <strong>2</strong>) or high
                value (<strong>3</strong>, <strong>4</strong>, <strong>5</strong>),
                achieving 8 possible colors.</li>
            <li>If the sum of component values gives at least <strong>8</strong>
                (all possible sums are between <strong>0</strong>
                and <strong>15</strong>), the color is high
                intenity (from <strong>8</strong> to <strong>F</strong>).</li>
            <li>If the sum of component values gives at greatest <strong>7</strong>
                (all possible sums are between <strong>0</strong>
                and <strong>15</strong>), the color is low
                intenity (from <strong>0</strong> to <strong>7</strong>).</li>
        </ul>
    </li>
    <li><strong>Colors from 232 to 255</strong> - <strong>0</strong>,
        <strong>0</strong>, <strong>0</strong>, <strong>0</strong>,
        <strong>8</strong>, <strong>8</strong>, <strong>8</strong>,
        <strong>8</strong>, <strong>7</strong>, <strong>7</strong>,
        <strong>7</strong>, <strong>7</strong>, <strong>F</strong>,
        <strong>F</strong>, <strong>F</strong>, <strong>F</strong>.</li>
</ul>

<p>The whole 256 to 16 color map:</p>

<pre>00-0F: 0 1 2 3 4 5 6 7 8 9 A B C D E F
10-33: 0 0 0 4 4 4 0 0 0 4 4 4 0 0 0 4 4 4 2 2 2 6 6 E 2 2 2 6 E E 2 2 2 E E E
34-57: 0 0 0 4 4 4 0 0 0 4 4 4 0 0 0 4 4 C 2 2 2 6 E E 2 2 2 E E E 2 2 A E E E
58-7B: 0 0 0 4 4 4 0 0 0 4 4 C 0 0 0 4 C C 2 2 2 E E E 2 2 A E E E 2 A A E E E
7C-9F: 1 1 1 5 5 D 1 1 1 5 D D 1 1 1 D D D 3 3 B F F F 3 B B F F F B B B F F F
A0-C3: 1 1 1 5 D D 1 1 1 D D D 1 1 9 D D D 3 B B F F F B B B F F F B B B F F F
C4-E7: 1 1 1 D D D 1 1 9 D D D 1 9 9 D D D B B B F F F B B B F F F B B B F F F
E8-FF: 0 0 0 0 0 0 8 8 8 8 8 8 7 7 7 7 7 7 F F F F F F</pre>

<p><strong>TextPaint</strong> does not support other attributes
than color, so every attribute set will be converted to color
when text is diaplayed (<strong>WorkMode=1</strong> or <strong>WorkMode=2</strong>)
or loaded into editor (<strong>WorkMode=0</strong>). If
background or foreground is not defined (is set as <strong>-1</strong>),
the colors from <strong>ColorNormal</strong> parameter will be
used.</p>

<h2>Font size</h2>

<p>The sequence 1Bh <strong>[ 0; P1; P2 V</strong> changes the
font size, where P1 is font width and P2 is font height. The
P1/P2 value can be from 0 do 10 as following:</p>

<table border="1" width="100%">
    <tr>
        <td width="33%">Value</td>
        <td width="33%">Size</td>
        <td width="34%">Display character part</td>
    </tr>
    <tr>
        <td>0</td>
        <td>1</td>
        <td>1 of 1</td>
    </tr>
    <tr>
        <td>1</td>
        <td>2</td>
        <td>1 of 2</td>
    </tr>
    <tr>
        <td>2</td>
        <td>2</td>
        <td>2 of 2</td>
    </tr>
    <tr>
        <td>3</td>
        <td>3</td>
        <td>1 of 3</td>
    </tr>
    <tr>
        <td>4</td>
        <td>3</td>
        <td>2 of 3</td>
    </tr>
    <tr>
        <td>5</td>
        <td>3</td>
        <td>3 of 3</td>
    </tr>
    <tr>
        <td>6</td>
        <td>4</td>
        <td>1 of 4</td>
    </tr>
    <tr>
        <td>7</td>
        <td>4</td>
        <td>2 of 4</td>
    </tr>
    <tr>
        <td>8</td>
        <td>4</td>
        <td>3 of 4</td>
    </tr>
    <tr>
        <td>9</td>
        <td>4</td>
        <td>4 of 4</td>
    </tr>
</table>

<h1>The VT52 mode</h1>

<p>The terminal and ANSI parser has VT52 mode, which can be
entered by <strong>1Bh [ ? 2 l</strong> sequence. In this mode,
there are another escape sequence set. Each sequence concsists of
2 character with some exceptions:</p>

<table border="1" width="100%">
    <tr>
        <td width="50%">Sequence</td>
        <td width="50%">Meaning</td>
    </tr>
    <tr>
        <td width="50%">1Bh F</td>
        <td width="50%">Enable semigraphic character set
        (different from standard VTx).</td>
    </tr>
    <tr>
        <td>1Bh G</td>
        <td>Disable semigraphic character set (different from
        standard VTx).</td>
    </tr>
    <tr>
        <td>1Bh &lt;</td>
        <td>Exit from VT52 mode.</td>
    </tr>
    <tr>
        <td>1Bh A</td>
        <td>Move cursor up.</td>
    </tr>
    <tr>
        <td>1Bh B</td>
        <td>Move cursor down.</td>
    </tr>
    <tr>
        <td>1Bh C</td>
        <td>Move cursor right.</td>
    </tr>
    <tr>
        <td>1Bh D</td>
        <td>Move cursor left.</td>
    </tr>
    <tr>
        <td>1Bh H</td>
        <td>Move cursor to upper left corner.</td>
    </tr>
    <tr>
        <td>1Bh Y XX YY</td>
        <td>Move cursor to XX column and YY row, when XX and YY
        are single character.</td>
    </tr>
    <tr>
        <td>1Bh d</td>
        <td>Clear the screen part from upper left corner to
        cursor.</td>
    </tr>
    <tr>
        <td>1Bh J</td>
        <td>Clear the screen part from cursor to lower right
        corner.</td>
    </tr>
    <tr>
        <td>1Bh E</td>
        <td>Move cursor to upper left corner and clear whole
        screen.</td>
    </tr>
    <tr>
        <td>1Bh Z</td>
        <td>Request for <strong>1Bh / Z</strong> response, only
        in <strong>WorkMode=3</strong>.</td>
    </tr>
    <tr>
        <td>1Bh I</td>
        <td>Move cursor up or scroll screen backward.</td>
    </tr>
    <tr>
        <td>1Bh K</td>
        <td>Clear current line from cursor to end.</td>
    </tr>
    <tr>
        <td>1Bh b P1</td>
        <td>Not implemented 3-character sequence.</td>
    </tr>
    <tr>
        <td>1Bh c P1</td>
        <td>Not implemented 3-character sequence.</td>
    </tr>
</table>

<p><script language="JavaScript"
src="file:///media/xxx/WORK1/__ToBackup/Develop/HTML/HTML2MD/Prog/html2md.js"></script></p>
</body>
</html>
